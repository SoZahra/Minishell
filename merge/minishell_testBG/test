#    Makefile                                           :+:      :+:    :+:    #
#    By: llarrey <llarrey@student.42.fr>            +#+  +:+       +#+         #
#    Updated: 2024/11/03 13:48:19 by llarrey          ###   ########.fr        #
NAME		=	minishell
LOOP_DIR	=	$(SRC_PATH)loop
LEXER_DIR	=	$(SRC_PATH)lexer
SIGNALS_DIR	=	$(SRC_PATH)signals
UTILS_DIR	=	$(SRC_PATH)utils
				env/env.c env/utils_env.c env/expand.c\
				loop/parsing.c loop/read.c loop/handle.c loop/read_utils.c\
				lexer/lexer.c lexer/lexer_utils.c lexer/handle.c lexer/tokens.c\
				pipe/exc_pipe.c pipe/pipe.c pipe/pipe_utils.c pipe/pipe_utils_2.c\
				signals/signal.c \
				utils/error.c utils/free.c
# Fichiers objets générés dans le dossier .objs/
# Include et libft
INC_PATH	=	include/
LIBFT_PATH	=	./libft/
LIBFT_LIB	=	$(LIBFT_PATH)libft.a
# Compilation
CFLAGS		=	-Wall -Werror -Wextra -I$(INC_PATH) -I$(LIBFT_PATH) -g3
LFLAGS		=	-L$(LIBFT_PATH) -lft -lreadline
# Couleurs
# Règle principale
all:	$(NAME)
	@echo "$(GREEN)[DONE] Minishell compiled!$(RESET)"
# Compilation des fichiers .c en .o dans .objs/
	@mkdir -p $(dir $@) # Crée le sous-dossier si nécessaire
	@echo "$(YELLOW)Compiling: $<$(RESET)"
# Compilation de la libft
	@make -C $(LIBFT_PATH) --silent
clean:
	@make clean -C $(LIBFT_PATH)
	@echo "$(RED)[DONE] Objects files deleted...$(RESET)"
# Nettoyage complet
fclean: clean
	@make fclean -C $(LIBFT_PATH)
	@echo "$(RED)[DONE] Minishell deleted...$(RESET)"
# Recompilation complète
re: fclean all
	@echo "$(GREEN)[DONE] Minishell recompiled!$(RESET)"
.PHONY: all clean fclean re
